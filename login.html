<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giriş Yap</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="logo">
            <a href="index.html">
                <img src="images/logo.png" alt="Logo" style="height: 50px;">
            </a>
        </div>
        <div class="hamburger">☰</div>
        <ul class="nav-links">
            <li><a href="index.html">Anasayfa</a></li>
            <li><a href="koc.html">Koçlarımız</a></li>
            <li><a href="faq.html">Sıkça Sorulan Sorular</a></li>
            <li><a href="ulas.html">Bize Ulaşın</a></li>
            <li><a href="login.html" class="active">Giriş Yap</a></li>
        </ul>
    </nav>

    <script>
        async function redirectToDashboard() {
          const email = document.getElementById('email').value;
          const password = document.getElementById('password').value;
      
          if (!email || !password) {
            alert("Lütfen tüm alanları doldurun."); // Please fill out all fields.
            return;
          }
      
          try {
            const response = await fetch('https://aros131.github.io/kulvar/auth/login', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({ email, password }),
            });
      
            const data = await response.json();
      
            if (response.ok) {
              // Store token in localStorage
              localStorage.setItem('token', data.token);
      
              // Redirect based on role
              if (data.role === 'user') {
                window.location.href = '/dashboard/user';
              } else if (data.role === 'coach') {
                window.location.href = '/dashboard/coach';
              } else {
                alert("Geçersiz rol."); // Invalid role.
              }
            } else {
              alert(data.message || "Giriş başarısız."); // Login failed.
            }
          } catch (error) {
            console.error("Error during login:", error);
            alert("Bir hata oluştu. Lütfen tekrar deneyin."); // An error occurred. Please try again.
          }
        }
      </script>
      

    <!-- Login Form Section -->
    <section class="login-section">
        <div class="login-form">
            <h2>Giriş Yap</h2>
            <input type="email" id="email" placeholder="E-posta Adresiniz" required>
            <input type="password" id="password" placeholder="Şifreniz" required>
            <button onclick="redirectToDashboard()">Giriş Yap</button>
            


            <p>Hesabınız yok mu? <a href="signup.html">Kayıt Ol</a></p>
        </div>
    </section>

    <script>
        // Function to simulate login and redirect to profile.html
        function redirectToProfile() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            if (email && password) {
                // Simulate successful login
                alert("Başarıyla giriş yaptınız!");
                window.location.href = "profile.html"; // Redirect to profile.html
            } else {
                alert("Lütfen tüm alanları doldurun.");
            }
        }
    </script>
</body>
</html>
